@page "/"
@page "/f/{name}/{type}"
@inject HttpClient Http
@inject NavigationManager NavManager
@if (forumPostListing == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="forum-grid-container">
        <div class="forum-header">
            <h3>
                @ForumUrlName
            </h3>
            <!-- Hot -->
            <button type="button" @onclick="@(() => GoToSort("hot"))" class="btn btn-secondary">Hot</button>
            <!-- New -->
            <button type="button" @onclick="@(() => GoToSort("new"))" class="btn btn-secondary">New</button>
            <!-- Top -->
            <div class="btn-group">
                <a type="button" v-bind:href="getUrlString('top')" class="btn btn-secondary">Top</a>
                <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" v-bind:href="getUrlString('top', '1-hours')">Past Hour</a>
                    <a class="dropdown-item" v-bind:href="getUrlString('top', '1-days')">Past Day</a>
                    <a class="dropdown-item" v-bind:href="getUrlString('top', '1-years')">Past Year</a>
                    <a class="dropdown-item" v-bind:href="getUrlString('top')">All Time</a>
                </div>
            </div>
            <!-- Controversial -->
            <div class="btn-group">
                <a type="button" v-bind:href="getUrlString('controversial')" class="btn btn-secondary">Controversial</a>
                <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" v-bind:href="getUrlString('controversial', '1-hours')">Past Hour</a>
                    <a class="dropdown-item" v-bind:href="getUrlString('controversial', '1-days')">Past Day</a>
                    <a class="dropdown-item" v-bind:href="getUrlString('controversial', '1-years')">Past Year</a>
                    <a class="dropdown-item" v-bind:href="getUrlString('controversial')">All Time</a>
                </div>
            </div>
        </div>
        <div v-infinite-scroll="retrievePosts" infinite-scroll-disabled="busy" infinite-scroll-throttle-delay="500" infinite-scroll-distance="10" class="forum-content">
            @if (!forumPostListing.Posts.Any())
            {
                <div v-if="forumPostListing.posts.length === 0" class="alert alert-warning" role="alert">
                    No posts based on your criteria.
                </div>
            }

            <ul class="list-unstyled">
                @foreach (var post in forumPostListing.Posts)
                {
                    <PostCard @key="post.Id" Post="post"></PostCard>
                }

            </ul>
            @if (NoMorePosts)
            {
                <div class="alert alert-primary" role="alert">
                    No more posts!
                </div>
            }
        </div>
        <div class="forum-menu">
            <div><h2>@ForumUrlName</h2></div>
            @if (ForumCanBeSubscribed)
            {
                <button @onclick="Save" class="@ForumSubscribedButtonClass">@ForumSubscribedButtonText</button>
            }
            <div>@forumPostListing.Forum.Description</div>
        </div>
    </div>
}
@code {

}
